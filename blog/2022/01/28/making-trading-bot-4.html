<!DOCTYPE html><html lang="en" class="scroll-smooth"><head><meta charSet="utf-8"/><meta content="width=device-width, initial-scale=1" name="viewport"/><title>트레이딩 봇 2.0 개발 후기</title><meta name="robots" content="follow, index"/><meta name="description" content="위의 시뮬레이션으로 테스트한 전략을 실제로 적용해 보기 위해서 grademark의 src/lib/backtest.ts 파일의 로직을 그대로 작성하면서 단지 원본 코드에서 사용하는 포지션 상태 값을 sqlite로 관리하도록 하고 거래소와의 REST API 통신으로 실제 매매를 수행하도록 했습니다."/><meta property="og:url" content="https://seungwoo321.github.io/blog/2022/01/28/making-trading-bot-4"/><meta property="og:type" content="article"/><meta property="og:site_name" content="SEUNGWOO&#x27;s TECH LOG"/><meta property="og:description" content="위의 시뮬레이션으로 테스트한 전략을 실제로 적용해 보기 위해서 grademark의 src/lib/backtest.ts 파일의 로직을 그대로 작성하면서 단지 원본 코드에서 사용하는 포지션 상태 값을 sqlite로 관리하도록 하고 거래소와의 REST API 통신으로 실제 매매를 수행하도록 했습니다."/><meta property="og:title" content="트레이딩 봇 2.0 개발 후기"/><meta property="og:image" content="https://seungwoo321.github.io/static/images/template2.png"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content=""/><meta name="twitter:title" content="트레이딩 봇 2.0 개발 후기"/><meta name="twitter:description" content="위의 시뮬레이션으로 테스트한 전략을 실제로 적용해 보기 위해서 grademark의 src/lib/backtest.ts 파일의 로직을 그대로 작성하면서 단지 원본 코드에서 사용하는 포지션 상태 값을 sqlite로 관리하도록 하고 거래소와의 REST API 통신으로 실제 매매를 수행하도록 했습니다."/><meta name="twitter:image" content="https://seungwoo321.github.io/static/images/template2.png"/><link rel="canonical" href="https://seungwoo321.github.io/blog/2022/01/28/making-trading-bot-4"/><meta property="article:published_time" content="2022-01-28T00:00:00.000Z"/><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "Article",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://seungwoo321.github.io/blog/2022/01/28/making-trading-bot-4"
  },
  "headline": "트레이딩 봇 2.0 개발 후기",
  "image": [
    {
      "@type": "ImageObject",
      "url": "https://seungwoo321.github.io/static/images/template2.png"
    }
  ],
  "datePublished": "2022-01-28T00:00:00.000Z",
  "dateModified": "2022-01-28T00:00:00.000Z",
  "author": [
    {
      "@type": "Person",
      "name": "Seungwoo Lee"
    }
  ],
  "publisher": {
    "@type": "Organization",
    "name": "Seungwoo Lee",
    "logo": {
      "@type": "ImageObject",
      "url": "https://seungwoo321.github.io/static/images/logo.png"
    }
  },
  "description": "위의 시뮬레이션으로 테스트한 전략을 실제로 적용해 보기 위해서 grademark의 src/lib/backtest.ts 파일의 로직을 그대로 작성하면서 단지 원본 코드에서 사용하는 포지션 상태 값을 sqlite로 관리하도록 하고 거래소와의 REST API 통신으로 실제 매매를 수행하도록 했습니다."
}</script><meta name="next-head-count" content="19"/><link rel="apple-touch-icon" sizes="76x76" href="/static/favicons/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/static/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/static/favicons/favicon-16x16.png"/><link rel="manifest" href="/manifest.json"/><link rel="mask-icon" href="/static/favicons/safari-pinned-tab.svg" color="#5bbad5"/><meta name="msapplication-TileColor" content="#000000"/><meta name="theme-color" media="(prefers-color-scheme: light)" content="#fff"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#000"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><meta name="google-site-verification" content="px1TntEZ-EKoV9k9xHvbO7KsQMLwj_Ajab5nprTM_pM"/><script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7701657858733816" crossorigin="anonymous"></script><link rel="preload" href="/_next/static/css/2cd1f2ef4c1300f6.css" as="style"/><link rel="stylesheet" href="/_next/static/css/2cd1f2ef4c1300f6.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-11b8648128cf5f13.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-bc837cf60c39558c.js" defer=""></script><script src="/_next/static/chunks/pages/_app-5bb35430f42ef290.js" defer=""></script><script src="/_next/static/chunks/573-6804e3fdfa6751ba.js" defer=""></script><script src="/_next/static/chunks/896-dcc6c0ec61afe736.js" defer=""></script><script src="/_next/static/chunks/477-b2a0bc4735afdb41.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5B...slug%5D-c268c94eb644c7b4.js" defer=""></script><script src="/_next/static/3TAXCsTDM0SWIpzRQQ2Y2/_buildManifest.js" defer=""></script><script src="/_next/static/3TAXCsTDM0SWIpzRQQ2Y2/_ssgManifest.js" defer=""></script></head><body class="bg-white text-black antialiased dark:bg-gray-900 dark:text-white"><div id="__next"><script>!function(){try{var d=document.documentElement,c=d.classList;c.remove('light','dark');var e=localStorage.getItem('theme');if('system'===e||(!e&&true)){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){d.style.colorScheme = 'dark';c.add('dark')}else{d.style.colorScheme = 'light';c.add('light')}}else if(e){c.add(e|| '')}if(e==='light'||e==='dark')d.style.colorScheme=e}catch(e){}}()</script><div class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div class="flex h-screen flex-col justify-between"><header class="flex items-center justify-between py-10"><div><a aria-label="SEUNGWOO&#x27;s TECH LOG" href="/"><div class="flex items-center justify-between"><div class="hidden h-6 text-2xl font-semibold sm:block">SEUNGWOO&#x27;s TECH LOG</div></div></a></div><div class="flex items-center text-base leading-5"><div class="hidden sm:block"><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/blog">Blog</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/tags">Tags</a></div><button aria-label="Toggle Dark Mode" type="button" class="ml-1 mr-1 h-8 w-8 rounded p-1 sm:ml-4"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg></button><div class="sm:hidden"><button type="button" class="ml-1 mr-1 h-8 w-8 rounded py-1" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg></button><div class="fixed top-0 left-0 z-10 h-full w-full transform bg-gray-200 opacity-95 duration-300 ease-in-out dark:bg-gray-800 translate-x-full"><div class="flex justify-end"><button type="button" class="mr-5 mt-11 h-8 w-8 rounded" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><nav class="fixed mt-8 h-full"><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/blog">Blog</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/tags">Tags</a></div></nav></div></div></div></header><main class="mb-auto"><div class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div class="fixed right-8 bottom-8 hidden flex-col gap-3 md:hidden"><button aria-label="Scroll To Comment" type="button" class="rounded-full bg-gray-200 p-2 text-gray-500 transition-all hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z" clip-rule="evenodd"></path></svg></button><button aria-label="Scroll To Top" type="button" class="rounded-full bg-gray-200 p-2 text-gray-500 transition-all hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg></button></div><article><div class="xl:divide-y xl:divide-gray-200 xl:dark:divide-gray-700"><header class="pt-6 xl:pb-6"><div class="space-y-1 text-center"><dl class="space-y-10"><div><dt class="sr-only">Published on</dt><dd class="text-base font-medium leading-6 text-gray-500 dark:text-gray-400"><time dateTime="2022-01-28T00:00:00.000Z">2022년 1월 28일 금요일</time></dd></div></dl><div><h1 class="text-3xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 sm:text-4xl sm:leading-10 md:text-5xl md:leading-14">트레이딩 봇 2.0 개발 후기</h1></div></div></header><div class="divide-y divide-gray-200 pb-8 dark:divide-gray-700 xl:grid xl:grid-cols-4 xl:gap-x-6 xl:divide-y-0" style="grid-template-rows:auto 1fr"><dl class="pt-6 pb-10 xl:border-b xl:border-gray-200 xl:pt-11 xl:dark:border-gray-700"><dt class="sr-only">Authors</dt><dd><ul class="flex justify-center space-x-8 sm:space-x-12 xl:block xl:space-x-0 xl:space-y-8"><li class="flex items-center space-x-2"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%2738%27%20height=%2738%27/%3e"/></span><img alt="avatar" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" class="h-10 w-10 rounded-full" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="avatar" srcSet="/static/images/avatar.jpeg?imwidth=48 1x, /static/images/avatar.jpeg?imwidth=96 2x" src="/static/images/avatar.jpeg?imwidth=96" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" class="h-10 w-10 rounded-full" loading="lazy"/></noscript></span><dl class="whitespace-nowrap text-sm font-medium leading-5"><dt class="sr-only">Name</dt><dd class="text-gray-900 dark:text-gray-100">Seungwoo Lee</dd><dt class="sr-only">Twitter</dt><dd></dd></dl></li></ul></dd></dl><div class="divide-y divide-gray-200 dark:divide-gray-700 xl:col-span-3 xl:row-span-2 xl:pb-0"><div class="prose max-w-none pt-10 pb-8 dark:prose-dark"><details open=""><summary class="ml-6 pt-2 pb-2 text-xl font-bold">Table of Contents</summary><div class="ml-6"><ul><li class="false"><a href="#시뮬레이션">시뮬레이션</a></li><li class="false"><a href="#봇-개발">봇 개발</a></li><li class="false"><a href="#다음-버전에서-개선해야-될-점">다음 버전에서 개선해야 될 점</a></li></ul></div></details><hr/><h2 id="시뮬레이션"><a href="#시뮬레이션" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>시뮬레이션</h2><p>grademark은 자바스크립트(JavaScript) 및 타입스크립트(TypeScript)에서 알고리즘 거래 백테스팅을 위한 툴킷입니다. 이 모듈의 백테스팅 로직을 살펴보면 시간 순으로 정렬된 캔들 형식의 데이터와 전략을 주입하면 타이프레임(Timeframe) 마다 포지션 상태(None, Enter, Postion, Exit)를 업데이트 하거나 주입받은 전략을 수행하고 가상의 거래 기록을 남깁니다. 이렇게 기록된 거래 내역을 바탕으로 승률이나 수익률과 같은 시뮬레이션 결과를 보여줍니다.</p><ul><li>strategy/simpleReversion.js</li></ul><div class="relative"><pre><code class="language-js code-highlight"><span class="code-line"><span class="token comment">// strategy/simpleReversion.js</span>
</span><span class="code-line">module<span class="token punctuation">.</span><span class="token property-access">exports</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token function function-variable">entryRule</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">enterPosition<span class="token punctuation">,</span> args</span><span class="token punctuation">)</span> <span class="token operator arrow">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>args<span class="token punctuation">.</span><span class="token property-access">bar</span><span class="token punctuation">.</span><span class="token property-access">close</span> <span class="token operator">&lt;</span> args<span class="token punctuation">.</span><span class="token property-access">bar</span><span class="token punctuation">.</span><span class="token property-access">sma</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// Buy when price is below average.</span>
</span><span class="code-line">            <span class="token function">enterPosition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">        <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token function function-variable">exitRule</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">exitPosition<span class="token punctuation">,</span> args</span><span class="token punctuation">)</span> <span class="token operator arrow">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>args<span class="token punctuation">.</span><span class="token property-access">bar</span><span class="token punctuation">.</span><span class="token property-access">close</span> <span class="token operator">&gt;</span> args<span class="token punctuation">.</span><span class="token property-access">bar</span><span class="token punctuation">.</span><span class="token property-access">sma</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">            <span class="token function">exitPosition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Sell when price is above average.</span>
</span><span class="code-line">        <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token function function-variable">stopLoss</span><span class="token operator">:</span> <span class="token parameter">args</span> <span class="token operator arrow">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">// Intrabar stop loss.</span>
</span><span class="code-line">        <span class="token keyword control-flow">return</span> args<span class="token punctuation">.</span><span class="token property-access">entryPrice</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">5</span><span class="token operator">/</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Stop out on 5% loss from entry price.</span>
</span><span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// strategy/otherStrategy.js</span>
</span><span class="code-line">
</span><span class="code-line">module<span class="token punctuation">.</span><span class="token property-access">exports</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token function function-variable">entryRule</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">enterPosition<span class="token punctuation">,</span> args</span><span class="token punctuation">)</span> <span class="token operator arrow">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token comment doc-comment">/** ... **/</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">            <span class="token function">enterPosition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">        <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token function function-variable">exitRule</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">exitPosition<span class="token punctuation">,</span> args</span><span class="token punctuation">)</span> <span class="token operator arrow">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token comment doc-comment">/** ... **/</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">            <span class="token function">exitPosition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">        <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token function function-variable">stopLoss</span><span class="token operator">:</span> <span class="token parameter">args</span> <span class="token operator arrow">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token keyword control-flow">return</span> args<span class="token punctuation">.</span><span class="token property-access">entryPrice</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">/</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// sstrategy/index.js</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">const</span> simpleReversion <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;strategy/simpleReversion.js&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword">const</span> otherStrategy <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;strategy/otherStrategy.js&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">module<span class="token punctuation">.</span><span class="token property-access">exports</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
</span><span class="code-line">    simpleReversion<span class="token punctuation">,</span>
</span><span class="code-line">    otherStrategy<span class="token punctuation">,</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre></div><p>grademark의 작성자는 <a target="_blank" rel="noopener noreferrer" href="https://github.com/grademark/grademark-first-example">grademark-first-example</a>에서 전체 사용 예제를 제공합니다. 이 예제를 참고해서 여러 가지 매매 규칙을 시험해 보기 위해 전략들을 모듈로 나눠서 작성했습니다.</p><p>작성한 매매 전략은 다음처럼 시뮬레이션 해볼 수 있습니다.</p><ul><li>backtest.js</li></ul><div class="relative"><pre><code class="language-js code-highlight"><span class="code-line"><span class="token keyword">const</span> <span class="token punctuation">{</span> backtest <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;grademark&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword">const</span> <span class="token punctuation">{</span>
</span><span class="code-line">    simpleReversion<span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token comment">// otherStrategy</span>
</span><span class="code-line"><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;./strategy&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">;</span> <span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">const</span> inputSeries <span class="token operator">=</span> <span class="token operator spread">...</span> <span class="token comment">// Call candle data</span>
</span><span class="code-line">    <span class="token keyword">const</span> trades <span class="token operator">=</span> <span class="token function">backtest</span><span class="token punctuation">(</span>simpleReversion<span class="token punctuation">,</span> inputSeries<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token keyword">const</span> startingCapital <span class="token operator">=</span> <span class="token number">10000</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token keyword">const</span> analysis <span class="token operator">=</span> <span class="token function">analyze</span><span class="token punctuation">(</span>startingCapital<span class="token punctuation">,</span> trades<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token class-name console">console</span><span class="token punctuation">.</span><span class="token function property-access method">log</span><span class="token punctuation">(</span>analysis<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span></code></pre></div><h2 id="봇-개발"><a href="#봇-개발" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>봇 개발</h2><p>위의 시뮬레이션으로 테스트한 전략을 실제로 적용해 보기 위해서 grademark의 src/lib/backtest.ts 파일의 로직을 그대로 작성하면서 단지 원본 코드에서 사용하는 포지션 상태 값을 sqlite로 관리하도록 하고 거래소와의 REST API 통신으로 실제 매매를 수행하도록 했습니다.</p><img src="/static/images/posts/2022/01/28/bot2.png" alt="diagram"/><p>봇의 동작을 살펴보면 크론(cron) 규칙으로 정의한 시간마다 봇 스크립트가 실행됩니다. 먼저 거래소와 통신해서 실제 포지션 상태를 확인하고 SQLite의 저장된 상태 값과 일치하는지 확인하고 동기화합니다. 이때 거래소와의 통신 외에는 GraphQL을 사용해서 데이터를 조회하고 업데이트합니다.</p><p>처음 개발한 버전에서는 포지션 상태 값 이란 게 없이 바로바로 거래소에 요청하여 매매를 수행했지만 이 버전에서는 확인된 포지션 상태 값에 따라 분기합니다. 예를 들어 매수 준비단계인 None 상태에서만 entryRule 을 실행합니다. 매수 규칙에 해당되면 Enter로 업데이트 합니다. 크론 규칙에 의해서 다시 실행이 될 때 포지션 상태값이 Enter 라면 매수를 수행하고 Position 값으로 합니다.</p><p>세부적으로는 매수를 하려고 한 가격보다 실제 시장가가 높다면 다시 None으로 초기화해서 매수 계획을 중단하기도 하고 매매 전략에서 stopLoss가 정의되어 있으면 트레일링 스탑 전략으로 손절 주문이 추가됩니다.</p><p>이전 버전과 동일하게 가장 기본이 되는 시장 데이터는 배치 서버에서 거래소와 WebSocket 통신으로 데이터를 수집하여 인플럭스DB(InfluxDB)에 쌓고 있습니다.</p><h2 id="다음-버전에서-개선해야-될-점"><a href="#다음-버전에서-개선해야-될-점" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>다음 버전에서 개선해야 될 점</h2><p>첫 번째로 포지션 상태 값 관리입니다. 한 번에 한 종목만 관리하기 때문에 여러 종목을 매매하려면 그만큼 노드(Node.js) 서버를 실행해야 되고 이 프로세스들은 SQLite에 데이터를 동시에 업데이트할 필요가 있습니다. SQLite는 한 번에 한 명의 작성자만 허용하기 때문에 적합하지 않습니다. 따라서 MySQL로 변경할 예정입니다.</p><p>두 번째로 거래소와의 통신 중에도 데이터를 가져오기만 하는 것은 GraphQL을 사용하는 것입니다. 이미 적용되어 있어야 할 부분인데 러닝 커브 등의 핑계로 다음 버전으로 미뤄지게 되었습니다.</p><p>세 번째는 InlfuxDB를 2버전으로 업데이트하는 것인데 쿼리 작성 문법이 완전히 바뀌어서 학습도 필요하지만 쿼리문을 최적화해도 1.8 버전에 비해 서버의 자원 사용률이 높아서 어떻게 해야 될지 고민을 하고 있습니다.</p><p>마지막으로 타입 스크립트로 개발한다면 개발자의 실수로 인해 생기는 오류들을 막을 수 있을 것 같습니다.</p></div><div class="pt-6 pb-6 text-sm text-gray-700 dark:text-gray-300"><a target="_blank" rel="noopener noreferrer" href="https://github.com/Seungwoo321.github.io/blob/master/data/blog/2022/01/28/making-trading-bot-4.mdx">View on GitHub</a></div><div class="pt-6 pb-6 text-center text-gray-700 dark:text-gray-300" id="comment"><button>Load Comments</button></div></div><footer><div class="divide-gray-200 text-sm font-medium leading-5 dark:divide-gray-700 xl:col-start-1 xl:row-start-2 xl:divide-y"><div class="py-4 xl:py-8"><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Tags</h2><div class="flex flex-wrap"><a class="mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/tags/trading-bot">Trading-Bot</a></div></div><div class="flex justify-between py-4 xl:block xl:space-y-8 xl:py-8"><div><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Previous Article</h2><div class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"><a href="/blog/2022/01/26/pros-and-cons-of-ssr-and-csr">SSR과 CSR의 장단점</a></div></div><div><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Next Article</h2><div class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"><a href="/blog/2022/01/29/what_is_event_delegation">이벤트 위임(Event Delegation)</a></div></div></div></div><div class="pt-4 xl:pt-8"><a class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/blog">← Back to the blog</a></div></footer></div></div></article></div></main><footer><div class="mt-16 flex flex-col items-center"><div class="mb-3 flex space-x-4"><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="mailto:seungwoo321@gmail.com"><span class="sr-only">mail</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" role="img" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M2.003 5.884 10 9.882l7.997-3.998A2 2 0 0 0 16 4H4a2 2 0 0 0-1.997 1.884z"></path><path d="m18 8.118-8 4-8-4V14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8.118z"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://github.com/Seungwoo321"><span class="sr-only">github</span><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" role="img" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a></div><div class="mb-2 flex space-x-2 text-sm text-gray-500 dark:text-gray-400"><div>Seungwoo Lee</div><div> • </div><div>© 2022</div><div> • </div><a href="/">SEUNGWOO&#x27;s TECH LOG</a></div></div></footer></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"트레이딩 봇 2.0 개발 후기","date":"2022-01-28T00:00:00.000Z","tags":["Trading Bot"],"draft":false,"summary":"위의 시뮬레이션으로 테스트한 전략을 실제로 적용해 보기 위해서 grademark의 src/lib/backtest.ts 파일의 로직을 그대로 작성하면서 단지 원본 코드에서 사용하는 포지션 상태 값을 sqlite로 관리하도록 하고 거래소와의 REST API 통신으로 실제 매매를 수행하도록 했습니다.","body":{"raw":"\n\u003cTOCInline toc={props.toc} exclude=\"Overview\" toHeading={2,3} asDisclosure/\u003e\n\n---\n\n## 시뮬레이션\n\ngrademark은 자바스크립트(JavaScript) 및 타입스크립트(TypeScript)에서 알고리즘 거래 백테스팅을 위한 툴킷입니다.\n이 모듈의 백테스팅 로직을 살펴보면 시간 순으로 정렬된 캔들 형식의 데이터와 전략을 주입하면 타이프레임(Timeframe) 마다\n포지션 상태(None, Enter, Postion, Exit)를 업데이트 하거나 주입받은 전략을 수행하고 가상의 거래 기록을 남깁니다.\n이렇게 기록된 거래 내역을 바탕으로 승률이나 수익률과 같은 시뮬레이션 결과를 보여줍니다.\n\n* strategy/simpleReversion.js\n\n```js\n// strategy/simpleReversion.js\nmodule.exports = {\n    entryRule: (enterPosition, args) =\u003e {\n        if (args.bar.close \u003c args.bar.sma) { // Buy when price is below average.\n            enterPosition();\n        }\n    },\n\n    exitRule: (exitPosition, args) =\u003e {\n        if (args.bar.close \u003e args.bar.sma) {\n            exitPosition(); // Sell when price is above average.\n        }\n    },\n\n    stopLoss: args =\u003e { // Intrabar stop loss.\n        return args.entryPrice * (5/100); // Stop out on 5% loss from entry price.\n    },\n};\n\n// strategy/otherStrategy.js\n\nmodule.exports = {\n    entryRule: (enterPosition, args) =\u003e {\n        if (/** ... **/) {\n            enterPosition();\n        }\n    },\n\n    exitRule: (exitPosition, args) =\u003e {\n        if (/** ... **/) {\n            exitPosition();\n        }\n    },\n\n    stopLoss: args =\u003e {\n        return args.entryPrice * (1/100);\n    },\n};\n\n// sstrategy/index.js\n\nconst simpleReversion = require('strategy/simpleReversion.js');\nconst otherStrategy = require('strategy/otherStrategy.js');\n\nmodule.exports = {\n    simpleReversion,\n    otherStrategy,\n}\n```\n\ngrademark의 작성자는 [grademark-first-example](https://github.com/grademark/grademark-first-example)에서 전체 사용 예제를 제공합니다. 이 예제를 참고해서 여러 가지 매매 규칙을 시험해 보기 위해 전략들을 모듈로 나눠서 작성했습니다.\n\n작성한 매매 전략은 다음처럼 시뮬레이션 해볼 수 있습니다.\n\n* backtest.js\n\n```js\nconst { backtest } = require('grademark');\nconst {\n    simpleReversion,\n    // otherStrategy\n} = require('./strategy');\n; (async function main () {\n    const inputSeries = ... // Call candle data\n    const trades = backtest(simpleReversion, inputSeries);\n    const startingCapital = 10000;\n    const analysis = analyze(startingCapital, trades);\n    console.log(analysis);\n})()\n```\n\n## 봇 개발\n\n위의 시뮬레이션으로 테스트한 전략을 실제로 적용해 보기 위해서 grademark의 src/lib/backtest.ts 파일의 로직을 그대로 작성하면서 단지 원본 코드에서 사용하는 포지션 상태 값을 sqlite로 관리하도록 하고 거래소와의 REST API 통신으로 실제 매매를 수행하도록 했습니다.\n\n\u003cimg src=\"/static/images/posts/2022/01/28/bot2.png\" alt=\"diagram\"/\u003e\n\n봇의 동작을 살펴보면 크론(cron) 규칙으로 정의한 시간마다 봇 스크립트가 실행됩니다. 먼저 거래소와 통신해서 실제 포지션 상태를 확인하고 SQLite의 저장된 상태 값과 일치하는지 확인하고 동기화합니다. 이때 거래소와의 통신 외에는 GraphQL을 사용해서 데이터를 조회하고 업데이트합니다.\n\n처음 개발한 버전에서는 포지션 상태 값 이란 게 없이 바로바로 거래소에 요청하여 매매를 수행했지만 이 버전에서는 확인된 포지션 상태 값에 따라 분기합니다. 예를 들어 매수 준비단계인 None 상태에서만 entryRule 을 실행합니다. 매수 규칙에 해당되면 Enter로 업데이트 합니다. 크론 규칙에 의해서 다시 실행이 될 때 포지션 상태값이 Enter 라면 매수를 수행하고 Position 값으로 합니다.\n\n세부적으로는 매수를 하려고 한 가격보다 실제 시장가가 높다면 다시 None으로 초기화해서 매수 계획을 중단하기도 하고 매매 전략에서 stopLoss가 정의되어 있으면 트레일링 스탑 전략으로 손절 주문이 추가됩니다.\n\n이전 버전과 동일하게 가장 기본이 되는 시장 데이터는 배치 서버에서 거래소와 WebSocket 통신으로 데이터를 수집하여 인플럭스DB(InfluxDB)에 쌓고 있습니다.\n\n## 다음 버전에서 개선해야 될 점\n\n첫 번째로 포지션 상태 값 관리입니다. 한 번에 한 종목만 관리하기 때문에 여러 종목을 매매하려면 그만큼 노드(Node.js) 서버를 실행해야 되고 이 프로세스들은 SQLite에 데이터를 동시에 업데이트할 필요가 있습니다. SQLite는 한 번에 한 명의 작성자만 허용하기 때문에 적합하지 않습니다. 따라서 MySQL로 변경할 예정입니다.\n\n두 번째로 거래소와의 통신 중에도 데이터를 가져오기만 하는 것은 GraphQL을 사용하는 것입니다. 이미 적용되어 있어야 할 \b부분인데 러닝 커브 등의 핑계로 다음 버전으로 미뤄지게 되었습니다.\n\n세 번째는 InlfuxDB를 2버전으로 업데이트하는 것인데 쿼리 작성 문법이 완전히 바뀌어서 학습도 필요하지만 쿼리문을 최적화해도 1.8 버전에 비해 서버의 자원 사용률이 높아서 어떻게 해야 될지 고민을 하고 있습니다.\n\n마지막으로 타입 스크립트로 개발한다면 개발자의 실수로 인해 생기는 오류들을 막을 수 있을 것 같습니다.\n","code":"var Component=(()=\u003e{var d=Object.create;var t=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var h=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty;var k=(a,n)=\u003e()=\u003e(n||a((n={exports:{}}).exports,n),n.exports),g=(a,n)=\u003e{for(var s in n)t(a,s,{get:n[s],enumerable:!0})},o=(a,n,s,l)=\u003e{if(n\u0026\u0026typeof n==\"object\"||typeof n==\"function\")for(let c of h(n))!N.call(a,c)\u0026\u0026c!==s\u0026\u0026t(a,c,{get:()=\u003en[c],enumerable:!(l=m(n,c))||l.enumerable});return a};var y=(a,n,s)=\u003e(s=a!=null?d(u(a)):{},o(n||!a||!a.__esModule?t(s,\"default\",{value:a,enumerable:!0}):s,a)),f=a=\u003eo(t({},\"__esModule\",{value:!0}),a);var r=k((R,i)=\u003e{i.exports=_jsx_runtime});var j={};g(j,{default:()=\u003ex,frontmatter:()=\u003eb});var e=y(r()),b={title:\"\\uD2B8\\uB808\\uC774\\uB529 \\uBD07 2.0 \\uAC1C\\uBC1C \\uD6C4\\uAE30\",date:\"2022-01-28\",tags:[\"Trading Bot\"],draft:!1,summary:\"\\uC704\\uC758 \\uC2DC\\uBBAC\\uB808\\uC774\\uC158\\uC73C\\uB85C \\uD14C\\uC2A4\\uD2B8\\uD55C \\uC804\\uB7B5\\uC744 \\uC2E4\\uC81C\\uB85C \\uC801\\uC6A9\\uD574 \\uBCF4\\uAE30 \\uC704\\uD574\\uC11C grademark\\uC758 src/lib/backtest.ts \\uD30C\\uC77C\\uC758 \\uB85C\\uC9C1\\uC744 \\uADF8\\uB300\\uB85C \\uC791\\uC131\\uD558\\uBA74\\uC11C \\uB2E8\\uC9C0 \\uC6D0\\uBCF8 \\uCF54\\uB4DC\\uC5D0\\uC11C \\uC0AC\\uC6A9\\uD558\\uB294 \\uD3EC\\uC9C0\\uC158 \\uC0C1\\uD0DC \\uAC12\\uC744 sqlite\\uB85C \\uAD00\\uB9AC\\uD558\\uB3C4\\uB85D \\uD558\\uACE0 \\uAC70\\uB798\\uC18C\\uC640\\uC758 REST API \\uD1B5\\uC2E0\\uC73C\\uB85C \\uC2E4\\uC81C \\uB9E4\\uB9E4\\uB97C \\uC218\\uD589\\uD558\\uB3C4\\uB85D \\uD588\\uC2B5\\uB2C8\\uB2E4.\"};function p(a){let n=Object.assign({hr:\"hr\",h2:\"h2\",a:\"a\",span:\"span\",p:\"p\",ul:\"ul\",li:\"li\",pre:\"pre\",code:\"code\"},a.components),{TOCInline:s}=n;return s||v(\"TOCInline\",!0,\"9:1-9:77\"),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(s,{toc:a.toc,exclude:\"Overview\",toHeading:3,asDisclosure:!0}),(0,e.jsx)(n.hr,{}),(0,e.jsxs)(n.h2,{id:\"\\uC2DC\\uBBAC\\uB808\\uC774\\uC158\",children:[(0,e.jsx)(n.a,{href:\"#\\uC2DC\\uBBAC\\uB808\\uC774\\uC158\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\uC2DC\\uBBAC\\uB808\\uC774\\uC158\"]}),(0,e.jsx)(n.p,{children:\"grademark\\uC740 \\uC790\\uBC14\\uC2A4\\uD06C\\uB9BD\\uD2B8(JavaScript) \\uBC0F \\uD0C0\\uC785\\uC2A4\\uD06C\\uB9BD\\uD2B8(TypeScript)\\uC5D0\\uC11C \\uC54C\\uACE0\\uB9AC\\uC998 \\uAC70\\uB798 \\uBC31\\uD14C\\uC2A4\\uD305\\uC744 \\uC704\\uD55C \\uD234\\uD0B7\\uC785\\uB2C8\\uB2E4. \\uC774 \\uBAA8\\uB4C8\\uC758 \\uBC31\\uD14C\\uC2A4\\uD305 \\uB85C\\uC9C1\\uC744 \\uC0B4\\uD3B4\\uBCF4\\uBA74 \\uC2DC\\uAC04 \\uC21C\\uC73C\\uB85C \\uC815\\uB82C\\uB41C \\uCE94\\uB4E4 \\uD615\\uC2DD\\uC758 \\uB370\\uC774\\uD130\\uC640 \\uC804\\uB7B5\\uC744 \\uC8FC\\uC785\\uD558\\uBA74 \\uD0C0\\uC774\\uD504\\uB808\\uC784(Timeframe) \\uB9C8\\uB2E4 \\uD3EC\\uC9C0\\uC158 \\uC0C1\\uD0DC(None, Enter, Postion, Exit)\\uB97C \\uC5C5\\uB370\\uC774\\uD2B8 \\uD558\\uAC70\\uB098 \\uC8FC\\uC785\\uBC1B\\uC740 \\uC804\\uB7B5\\uC744 \\uC218\\uD589\\uD558\\uACE0 \\uAC00\\uC0C1\\uC758 \\uAC70\\uB798 \\uAE30\\uB85D\\uC744 \\uB0A8\\uAE41\\uB2C8\\uB2E4. \\uC774\\uB807\\uAC8C \\uAE30\\uB85D\\uB41C \\uAC70\\uB798 \\uB0B4\\uC5ED\\uC744 \\uBC14\\uD0D5\\uC73C\\uB85C \\uC2B9\\uB960\\uC774\\uB098 \\uC218\\uC775\\uB960\\uACFC \\uAC19\\uC740 \\uC2DC\\uBBAC\\uB808\\uC774\\uC158 \\uACB0\\uACFC\\uB97C \\uBCF4\\uC5EC\\uC90D\\uB2C8\\uB2E4.\"}),(0,e.jsx)(n.ul,{children:(0,e.jsx)(n.li,{children:\"strategy/simpleReversion.js\"})}),(0,e.jsx)(n.pre,{className:\"language-js\",children:(0,e.jsxs)(n.code,{className:\"language-js code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// strategy/simpleReversion.js\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"module\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"exports\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token function function-variable\",children:\"entryRule\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token parameter\",children:[\"enterPosition\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" args\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator arrow\",children:\"=\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"args\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"bar\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"close\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),\" args\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"bar\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"sma\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// Buy when price is below average.\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token function\",children:\"enterPosition\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token function function-variable\",children:\"exitRule\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token parameter\",children:[\"exitPosition\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" args\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator arrow\",children:\"=\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"args\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"bar\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"close\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),\" args\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"bar\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"sma\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token function\",children:\"exitPosition\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// Sell when price is above average.\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token function function-variable\",children:\"stopLoss\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token parameter\",children:\"args\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator arrow\",children:\"=\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// Intrabar stop loss.\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"return\"}),\" args\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"entryPrice\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"*\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"5\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"/\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"100\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// Stop out on 5% loss from entry price.\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// strategy/otherStrategy.js\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"module\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"exports\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token function function-variable\",children:\"entryRule\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token parameter\",children:[\"enterPosition\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" args\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator arrow\",children:\"=\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token comment doc-comment\",children:\"/** ... **/\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token function\",children:\"enterPosition\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token function function-variable\",children:\"exitRule\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token parameter\",children:[\"exitPosition\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" args\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator arrow\",children:\"=\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token comment doc-comment\",children:\"/** ... **/\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token function\",children:\"exitPosition\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token function function-variable\",children:\"stopLoss\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token parameter\",children:\"args\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator arrow\",children:\"=\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"return\"}),\" args\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"entryPrice\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"*\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"1\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"/\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"100\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// sstrategy/index.js\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" simpleReversion \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"require\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'strategy/simpleReversion.js'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" otherStrategy \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"require\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'strategy/otherStrategy.js'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"module\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"exports\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    simpleReversion\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    otherStrategy\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,e.jsxs)(n.p,{children:[\"grademark\\uC758 \\uC791\\uC131\\uC790\\uB294 \",(0,e.jsx)(n.a,{href:\"https://github.com/grademark/grademark-first-example\",children:\"grademark-first-example\"}),\"\\uC5D0\\uC11C \\uC804\\uCCB4 \\uC0AC\\uC6A9 \\uC608\\uC81C\\uB97C \\uC81C\\uACF5\\uD569\\uB2C8\\uB2E4. \\uC774 \\uC608\\uC81C\\uB97C \\uCC38\\uACE0\\uD574\\uC11C \\uC5EC\\uB7EC \\uAC00\\uC9C0 \\uB9E4\\uB9E4 \\uADDC\\uCE59\\uC744 \\uC2DC\\uD5D8\\uD574 \\uBCF4\\uAE30 \\uC704\\uD574 \\uC804\\uB7B5\\uB4E4\\uC744 \\uBAA8\\uB4C8\\uB85C \\uB098\\uB220\\uC11C \\uC791\\uC131\\uD588\\uC2B5\\uB2C8\\uB2E4.\"]}),(0,e.jsx)(n.p,{children:\"\\uC791\\uC131\\uD55C \\uB9E4\\uB9E4 \\uC804\\uB7B5\\uC740 \\uB2E4\\uC74C\\uCC98\\uB7FC \\uC2DC\\uBBAC\\uB808\\uC774\\uC158 \\uD574\\uBCFC \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4.\"}),(0,e.jsx)(n.ul,{children:(0,e.jsx)(n.li,{children:\"backtest.js\"})}),(0,e.jsx)(n.pre,{className:\"language-js\",children:(0,e.jsxs)(n.code,{className:\"language-js code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" backtest \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"require\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'grademark'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    simpleReversion\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// otherStrategy\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"require\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'./strategy'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"async\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"main\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" inputSeries \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator spread\",children:\"...\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// Call candle data\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" trades \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"backtest\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"simpleReversion\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" inputSeries\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" startingCapital \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"10000\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" analysis \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"analyze\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"startingCapital\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" trades\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token class-name console\",children:\"console\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function property-access method\",children:\"log\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"analysis\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),(0,e.jsxs)(n.h2,{id:\"\\uBD07-\\uAC1C\\uBC1C\",children:[(0,e.jsx)(n.a,{href:\"#\\uBD07-\\uAC1C\\uBC1C\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\uBD07 \\uAC1C\\uBC1C\"]}),(0,e.jsx)(n.p,{children:\"\\uC704\\uC758 \\uC2DC\\uBBAC\\uB808\\uC774\\uC158\\uC73C\\uB85C \\uD14C\\uC2A4\\uD2B8\\uD55C \\uC804\\uB7B5\\uC744 \\uC2E4\\uC81C\\uB85C \\uC801\\uC6A9\\uD574 \\uBCF4\\uAE30 \\uC704\\uD574\\uC11C grademark\\uC758 src/lib/backtest.ts \\uD30C\\uC77C\\uC758 \\uB85C\\uC9C1\\uC744 \\uADF8\\uB300\\uB85C \\uC791\\uC131\\uD558\\uBA74\\uC11C \\uB2E8\\uC9C0 \\uC6D0\\uBCF8 \\uCF54\\uB4DC\\uC5D0\\uC11C \\uC0AC\\uC6A9\\uD558\\uB294 \\uD3EC\\uC9C0\\uC158 \\uC0C1\\uD0DC \\uAC12\\uC744 sqlite\\uB85C \\uAD00\\uB9AC\\uD558\\uB3C4\\uB85D \\uD558\\uACE0 \\uAC70\\uB798\\uC18C\\uC640\\uC758 REST API \\uD1B5\\uC2E0\\uC73C\\uB85C \\uC2E4\\uC81C \\uB9E4\\uB9E4\\uB97C \\uC218\\uD589\\uD558\\uB3C4\\uB85D \\uD588\\uC2B5\\uB2C8\\uB2E4.\"}),(0,e.jsx)(\"img\",{src:\"/static/images/posts/2022/01/28/bot2.png\",alt:\"diagram\"}),(0,e.jsx)(n.p,{children:\"\\uBD07\\uC758 \\uB3D9\\uC791\\uC744 \\uC0B4\\uD3B4\\uBCF4\\uBA74 \\uD06C\\uB860(cron) \\uADDC\\uCE59\\uC73C\\uB85C \\uC815\\uC758\\uD55C \\uC2DC\\uAC04\\uB9C8\\uB2E4 \\uBD07 \\uC2A4\\uD06C\\uB9BD\\uD2B8\\uAC00 \\uC2E4\\uD589\\uB429\\uB2C8\\uB2E4. \\uBA3C\\uC800 \\uAC70\\uB798\\uC18C\\uC640 \\uD1B5\\uC2E0\\uD574\\uC11C \\uC2E4\\uC81C \\uD3EC\\uC9C0\\uC158 \\uC0C1\\uD0DC\\uB97C \\uD655\\uC778\\uD558\\uACE0 SQLite\\uC758 \\uC800\\uC7A5\\uB41C \\uC0C1\\uD0DC \\uAC12\\uACFC \\uC77C\\uCE58\\uD558\\uB294\\uC9C0 \\uD655\\uC778\\uD558\\uACE0 \\uB3D9\\uAE30\\uD654\\uD569\\uB2C8\\uB2E4. \\uC774\\uB54C \\uAC70\\uB798\\uC18C\\uC640\\uC758 \\uD1B5\\uC2E0 \\uC678\\uC5D0\\uB294 GraphQL\\uC744 \\uC0AC\\uC6A9\\uD574\\uC11C \\uB370\\uC774\\uD130\\uB97C \\uC870\\uD68C\\uD558\\uACE0 \\uC5C5\\uB370\\uC774\\uD2B8\\uD569\\uB2C8\\uB2E4.\"}),(0,e.jsx)(n.p,{children:\"\\uCC98\\uC74C \\uAC1C\\uBC1C\\uD55C \\uBC84\\uC804\\uC5D0\\uC11C\\uB294 \\uD3EC\\uC9C0\\uC158 \\uC0C1\\uD0DC \\uAC12 \\uC774\\uB780 \\uAC8C \\uC5C6\\uC774 \\uBC14\\uB85C\\uBC14\\uB85C \\uAC70\\uB798\\uC18C\\uC5D0 \\uC694\\uCCAD\\uD558\\uC5EC \\uB9E4\\uB9E4\\uB97C \\uC218\\uD589\\uD588\\uC9C0\\uB9CC \\uC774 \\uBC84\\uC804\\uC5D0\\uC11C\\uB294 \\uD655\\uC778\\uB41C \\uD3EC\\uC9C0\\uC158 \\uC0C1\\uD0DC \\uAC12\\uC5D0 \\uB530\\uB77C \\uBD84\\uAE30\\uD569\\uB2C8\\uB2E4. \\uC608\\uB97C \\uB4E4\\uC5B4 \\uB9E4\\uC218 \\uC900\\uBE44\\uB2E8\\uACC4\\uC778 None \\uC0C1\\uD0DC\\uC5D0\\uC11C\\uB9CC entryRule \\uC744 \\uC2E4\\uD589\\uD569\\uB2C8\\uB2E4. \\uB9E4\\uC218 \\uADDC\\uCE59\\uC5D0 \\uD574\\uB2F9\\uB418\\uBA74 Enter\\uB85C \\uC5C5\\uB370\\uC774\\uD2B8 \\uD569\\uB2C8\\uB2E4. \\uD06C\\uB860 \\uADDC\\uCE59\\uC5D0 \\uC758\\uD574\\uC11C \\uB2E4\\uC2DC \\uC2E4\\uD589\\uC774 \\uB420 \\uB54C \\uD3EC\\uC9C0\\uC158 \\uC0C1\\uD0DC\\uAC12\\uC774 Enter \\uB77C\\uBA74 \\uB9E4\\uC218\\uB97C \\uC218\\uD589\\uD558\\uACE0 Position \\uAC12\\uC73C\\uB85C \\uD569\\uB2C8\\uB2E4.\"}),(0,e.jsx)(n.p,{children:\"\\uC138\\uBD80\\uC801\\uC73C\\uB85C\\uB294 \\uB9E4\\uC218\\uB97C \\uD558\\uB824\\uACE0 \\uD55C \\uAC00\\uACA9\\uBCF4\\uB2E4 \\uC2E4\\uC81C \\uC2DC\\uC7A5\\uAC00\\uAC00 \\uB192\\uB2E4\\uBA74 \\uB2E4\\uC2DC None\\uC73C\\uB85C \\uCD08\\uAE30\\uD654\\uD574\\uC11C \\uB9E4\\uC218 \\uACC4\\uD68D\\uC744 \\uC911\\uB2E8\\uD558\\uAE30\\uB3C4 \\uD558\\uACE0 \\uB9E4\\uB9E4 \\uC804\\uB7B5\\uC5D0\\uC11C stopLoss\\uAC00 \\uC815\\uC758\\uB418\\uC5B4 \\uC788\\uC73C\\uBA74 \\uD2B8\\uB808\\uC77C\\uB9C1 \\uC2A4\\uD0D1 \\uC804\\uB7B5\\uC73C\\uB85C \\uC190\\uC808 \\uC8FC\\uBB38\\uC774 \\uCD94\\uAC00\\uB429\\uB2C8\\uB2E4.\"}),(0,e.jsx)(n.p,{children:\"\\uC774\\uC804 \\uBC84\\uC804\\uACFC \\uB3D9\\uC77C\\uD558\\uAC8C \\uAC00\\uC7A5 \\uAE30\\uBCF8\\uC774 \\uB418\\uB294 \\uC2DC\\uC7A5 \\uB370\\uC774\\uD130\\uB294 \\uBC30\\uCE58 \\uC11C\\uBC84\\uC5D0\\uC11C \\uAC70\\uB798\\uC18C\\uC640 WebSocket \\uD1B5\\uC2E0\\uC73C\\uB85C \\uB370\\uC774\\uD130\\uB97C \\uC218\\uC9D1\\uD558\\uC5EC \\uC778\\uD50C\\uB7ED\\uC2A4DB(InfluxDB)\\uC5D0 \\uC313\\uACE0 \\uC788\\uC2B5\\uB2C8\\uB2E4.\"}),(0,e.jsxs)(n.h2,{id:\"\\uB2E4\\uC74C-\\uBC84\\uC804\\uC5D0\\uC11C-\\uAC1C\\uC120\\uD574\\uC57C-\\uB420-\\uC810\",children:[(0,e.jsx)(n.a,{href:\"#\\uB2E4\\uC74C-\\uBC84\\uC804\\uC5D0\\uC11C-\\uAC1C\\uC120\\uD574\\uC57C-\\uB420-\\uC810\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\uB2E4\\uC74C \\uBC84\\uC804\\uC5D0\\uC11C \\uAC1C\\uC120\\uD574\\uC57C \\uB420 \\uC810\"]}),(0,e.jsx)(n.p,{children:\"\\uCCAB \\uBC88\\uC9F8\\uB85C \\uD3EC\\uC9C0\\uC158 \\uC0C1\\uD0DC \\uAC12 \\uAD00\\uB9AC\\uC785\\uB2C8\\uB2E4. \\uD55C \\uBC88\\uC5D0 \\uD55C \\uC885\\uBAA9\\uB9CC \\uAD00\\uB9AC\\uD558\\uAE30 \\uB54C\\uBB38\\uC5D0 \\uC5EC\\uB7EC \\uC885\\uBAA9\\uC744 \\uB9E4\\uB9E4\\uD558\\uB824\\uBA74 \\uADF8\\uB9CC\\uD07C \\uB178\\uB4DC(Node.js) \\uC11C\\uBC84\\uB97C \\uC2E4\\uD589\\uD574\\uC57C \\uB418\\uACE0 \\uC774 \\uD504\\uB85C\\uC138\\uC2A4\\uB4E4\\uC740 SQLite\\uC5D0 \\uB370\\uC774\\uD130\\uB97C \\uB3D9\\uC2DC\\uC5D0 \\uC5C5\\uB370\\uC774\\uD2B8\\uD560 \\uD544\\uC694\\uAC00 \\uC788\\uC2B5\\uB2C8\\uB2E4. SQLite\\uB294 \\uD55C \\uBC88\\uC5D0 \\uD55C \\uBA85\\uC758 \\uC791\\uC131\\uC790\\uB9CC \\uD5C8\\uC6A9\\uD558\\uAE30 \\uB54C\\uBB38\\uC5D0 \\uC801\\uD569\\uD558\\uC9C0 \\uC54A\\uC2B5\\uB2C8\\uB2E4. \\uB530\\uB77C\\uC11C MySQL\\uB85C \\uBCC0\\uACBD\\uD560 \\uC608\\uC815\\uC785\\uB2C8\\uB2E4.\"}),(0,e.jsx)(n.p,{children:\"\\uB450 \\uBC88\\uC9F8\\uB85C \\uAC70\\uB798\\uC18C\\uC640\\uC758 \\uD1B5\\uC2E0 \\uC911\\uC5D0\\uB3C4 \\uB370\\uC774\\uD130\\uB97C \\uAC00\\uC838\\uC624\\uAE30\\uB9CC \\uD558\\uB294 \\uAC83\\uC740 GraphQL\\uC744 \\uC0AC\\uC6A9\\uD558\\uB294 \\uAC83\\uC785\\uB2C8\\uB2E4. \\uC774\\uBBF8 \\uC801\\uC6A9\\uB418\\uC5B4 \\uC788\\uC5B4\\uC57C \\uD560 \\b\\uBD80\\uBD84\\uC778\\uB370 \\uB7EC\\uB2DD \\uCEE4\\uBE0C \\uB4F1\\uC758 \\uD551\\uACC4\\uB85C \\uB2E4\\uC74C \\uBC84\\uC804\\uC73C\\uB85C \\uBBF8\\uB904\\uC9C0\\uAC8C \\uB418\\uC5C8\\uC2B5\\uB2C8\\uB2E4.\"}),(0,e.jsx)(n.p,{children:\"\\uC138 \\uBC88\\uC9F8\\uB294 InlfuxDB\\uB97C 2\\uBC84\\uC804\\uC73C\\uB85C \\uC5C5\\uB370\\uC774\\uD2B8\\uD558\\uB294 \\uAC83\\uC778\\uB370 \\uCFFC\\uB9AC \\uC791\\uC131 \\uBB38\\uBC95\\uC774 \\uC644\\uC804\\uD788 \\uBC14\\uB00C\\uC5B4\\uC11C \\uD559\\uC2B5\\uB3C4 \\uD544\\uC694\\uD558\\uC9C0\\uB9CC \\uCFFC\\uB9AC\\uBB38\\uC744 \\uCD5C\\uC801\\uD654\\uD574\\uB3C4 1.8 \\uBC84\\uC804\\uC5D0 \\uBE44\\uD574 \\uC11C\\uBC84\\uC758 \\uC790\\uC6D0 \\uC0AC\\uC6A9\\uB960\\uC774 \\uB192\\uC544\\uC11C \\uC5B4\\uB5BB\\uAC8C \\uD574\\uC57C \\uB420\\uC9C0 \\uACE0\\uBBFC\\uC744 \\uD558\\uACE0 \\uC788\\uC2B5\\uB2C8\\uB2E4.\"}),(0,e.jsx)(n.p,{children:\"\\uB9C8\\uC9C0\\uB9C9\\uC73C\\uB85C \\uD0C0\\uC785 \\uC2A4\\uD06C\\uB9BD\\uD2B8\\uB85C \\uAC1C\\uBC1C\\uD55C\\uB2E4\\uBA74 \\uAC1C\\uBC1C\\uC790\\uC758 \\uC2E4\\uC218\\uB85C \\uC778\\uD574 \\uC0DD\\uAE30\\uB294 \\uC624\\uB958\\uB4E4\\uC744 \\uB9C9\\uC744 \\uC218 \\uC788\\uC744 \\uAC83 \\uAC19\\uC2B5\\uB2C8\\uB2E4.\"})]})}function w(a={}){let{wrapper:n}=a.components||{};return n?(0,e.jsx)(n,Object.assign({},a,{children:(0,e.jsx)(p,a)})):p(a)}var x=w;function v(a,n,s){throw new Error(\"Expected \"+(n?\"component\":\"object\")+\" `\"+a+\"` to be defined: you likely forgot to import, pass, or provide it.\"+(s?\"\\nIt\\u2019s referenced in your code at `\"+s+\"` in `/home/swlee/dev/repository/github/seungwoo321.github.io/_mdx_bundler_entry_point-2e5daa91-58f5-4ad0-b8dd-8d9468be7558.mdx`\":\"\"))}return f(j);})();\n;return Component;"},"_id":"blog/2022/01/28/making-trading-bot-4.mdx","_raw":{"sourceFilePath":"blog/2022/01/28/making-trading-bot-4.mdx","sourceFileName":"making-trading-bot-4.mdx","sourceFileDir":"blog/2022/01/28","contentType":"mdx","flattenedPath":"blog/2022/01/28/making-trading-bot-4"},"type":"Blog","readingTime":{"text":"7 min read","minutes":6.37,"time":382200,"words":1274},"slug":"2022/01/28/making-trading-bot-4","path":"blog/2022/01/28/making-trading-bot-4","filePath":"blog/2022/01/28/making-trading-bot-4.mdx","toc":[{"value":"시뮬레이션","url":"#시뮬레이션","depth":2},{"value":"봇 개발","url":"#봇-개발","depth":2},{"value":"다음 버전에서 개선해야 될 점","url":"#다음-버전에서-개선해야-될-점","depth":2}]},"authorDetails":[{"name":"Seungwoo Lee","avatar":"/static/images/avatar.jpeg","occupation":"Front-End Engineer","company":"Megazone Cloud","email":"seungwoo321@gmail.com","linkedin":"https://www.linkedin.com/in/seungwoo321","github":"https://github.com/Seungwoo321","type":"Authors","readingTime":{"text":"1 min read","minutes":0.84,"time":50400,"words":168},"slug":"default","path":"authors/default","filePath":"authors/default.mdx","toc":[{"value":"Skils","url":"#skils","depth":1},{"value":"Experience","url":"#experience","depth":1},{"value":"Certifications","url":"#certifications","depth":1}]}],"prev":{"title":"SSR과 CSR의 장단점","date":"2022-01-26T00:00:00.000Z","tags":["Frontend"],"draft":false,"summary":"SSR(Server Side Rendering)과 CSR(Client Side Rendering)의 장단점 정리해 보자","type":"Blog","readingTime":{"text":"2 min read","minutes":1.025,"time":61500,"words":205},"slug":"2022/01/26/pros-and-cons-of-ssr-and-csr","path":"blog/2022/01/26/pros-and-cons-of-ssr-and-csr","filePath":"blog/2022/01/26/pros-and-cons-of-ssr-and-csr.mdx","toc":[{"value":"SSR(Server Side Rendering)","url":"#ssrserver-side-rendering","depth":2},{"value":"CSR(Client Side Rendering)","url":"#csrclient-side-rendering","depth":2}]},"next":{"title":"이벤트 위임(Event Delegation)","date":"2022-01-29T00:00:00.000Z","tags":["Frontend","JavaScript"],"draft":false,"summary":"DOM의 이벤트 버블링(Event Bubbling) 특성을 활용해 이벤트 리스너를 하위 요소에 추가하는 대신 상위 요소에 추가하는 기법입니다.","type":"Blog","readingTime":{"text":"4 min read","minutes":3.395,"time":203700,"words":679},"slug":"2022/01/29/what_is_event_delegation","path":"blog/2022/01/29/what_is_event_delegation","filePath":"blog/2022/01/29/what_is_event_delegation.mdx","toc":[{"value":"이벤트 위임이란","url":"#이벤트-위임이란","depth":2},{"value":"이벤트 버블링(Event Bubbling)","url":"#이벤트-버블링event-bubbling","depth":2},{"value":"이벤트 캡쳐(Event Capture)","url":"#이벤트-캡쳐event-capture","depth":2},{"value":"event.stopPropagation()","url":"#eventstoppropagation","depth":3},{"value":"Reference","url":"#reference","depth":1}]}},"__N_SSG":true},"page":"/blog/[...slug]","query":{"slug":["2022","01","28","making-trading-bot-4"]},"buildId":"3TAXCsTDM0SWIpzRQQ2Y2","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>