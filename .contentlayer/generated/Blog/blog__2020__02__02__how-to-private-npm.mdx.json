{
  "title": "비공개 NPM 저장소 구성하기",
  "date": "2020-02-02T00:00:00.000Z",
  "tags": [
    "NPM"
  ],
  "draft": false,
  "summary": "오픈소스 sinopia를 사용해서 Prvate NPM 저장소를 구성하고 스코프 문제를 해결한 경험을 정리하자.",
  "body": {
    "raw": "\n![npm-sinopia.png](/static/images/posts/2020/02/02/npm-sinopia.png)\n\n> 오픈소스 Sinopia를 사용해서 Prvate NPM 저장소를 구성하고 스코프 문제를 해결한 경험을 정리하자.\n\n디자인 시스템을 목표로 한 Vue 프레임워크 기반의 UI 템플릿 **`Vuesign`**(Vue + Design의 합성어)을 만들었다.\n이 템플릿을 사용해서 여러 개의 웹 프로젝트가 진행될 예정이고 템플릿의 내용이 변경되면 당연히 각 웹 사이트에 변경사항이 배포가 되어야 한다.\nnpm의 패키지 관리 장점을 그대로 사용하고 싶어서 별도의 비공개 NPM 저장소를 구축하기로 했다.\nnpm에서 제공하는 서비스는 비용 문제가 있어서 sinopia라는 오픈소스를 사용해서 구성했다.\n\n## 설치 및 사용자 생성\n\n상세한 내용은 [README](https://github.com/rlidwka/sinopia)를 확인하자.\n\n```bash\n# 글로벌로 패키지 설치\n$ npm install -g sinopia\n\n# 서비스 실행\n$ sinopia\n\n# 사용자 생성  \n$ npm adduser --registry http://localhost:4873/\n```\n\n> 브라우저에서 `http://localhost:4873/` 혹은 외부 IP:4873 포트로 접속해서 위에서 생성한 사용자로 로그인해서 정상 설치 여부를 확인한다.\n\n\n## 백그라운드로 서비스 시작 & 종료\n\n```bash\n# 로그 남기지 않고 백그라운드에서 실행하기\n$ nohup sinopia 1>/dev/null 2>&1 &\n\n# 종료하기\n$ pkill -9 sinopia\n```\n\n## 사용방법\n\n* npm 환경설정의 registry를 변경하고 커맨드 사용\n\n```bash\n# 기존 설정 확인 & 저장소 변경\n$ npm config list\n$ npm set registry http://localhost:4873\n```\n\n* 글로벌로 변경하지 않고 커맨드에 옵션을 추가하여 사용\n\n```bash\n# 옵션으로 사용\n$ npm i --registry http://localhost:4873\n$ npm publish --registry http://localhost:4873\n```\n\n> 깃허브 레포지토리의 README.md 문서에 작성되어 있는 사용 사례를 읽어 보면 `패키지의 프라이빗 한 저장소` 외에도 npmjs.org 레지스트리의 캐시 역할도 할 수 있다.\n\n## 기본 환경 설정\n\n* 설정 파일은 yaml 형식으로 작성된다.\n* default 내용은 [여기](https://github.com/rlidwka/sinopia/blob/master/conf/default.yaml)에서 확인할 수 있다.\n* 홈 디렉토리 하위의`.config/sinopia/config.ymal` 경로에 위치한다.\n\n## 주요 이슈 및 해결\n\n### 이슈\n\n최근 프론트엔드 프레임워크인 Vue.js, Angular, React를 살펴보면 스코프를 의미하는 @ 기호가 포함되어 있는 것을 볼 수 있는데 이렇게 @가 포함된 패키지를 다운로드 할 때는 패키지를 찾을 수 없다는 404 오류가 발생한다.\n\n### 원인\n\n기본 설정 packages의 `@*/*`에는 프록시가 설정되어 있지 않고 로컬(프라이빗 저장소)에 해당 패키지가 존재하지 않을 경우에는 더 찾지 않는 것이다.\n\n이 오픈소스의 개발 당시인 약 5년 전에는 패키지의 이름에  @가 지금처럼 보편화되어 사용되지 않았고 프라이빗 한 비공개 패키지란 의미로 많이 쓰이다 보니 생긴 문제가 아닐까 싶다.\n\n### 해결\n\n기본 설정 파일에서 `@*/*` 하위 레벨에 `proxy: npmjs` 을 추가해 주면 @ 기호가 포함된 패키지를 로컬(프라이빗 저장소)에서 찾지 못하더라도 `npmjs`저장소까지 탐색해서 정상적으로 패키지를 다운로드할 수 있게 된다.\n\n```yml\n#\n# This is the default config file. It allows all users to do anything,\n# so don't use it on production systems.\n#\n# Look here for more config file examples:\n# https://github.com/rlidwka/sinopia/tree/master/conf\n#\n\n# path to a directory with all packages\nstorage: ./storage\n\nauth:\n  htpasswd:\n    file: ./htpasswd\n    # Maximum amount of users allowed to register, defaults to \"+inf\".\n    # You can set this to -1 to disable registration.\n    #max_users: 1000\n\n# a list of other known repositories we can talk to\nuplinks:\n  npmjs:\n    url: https://registry.npmjs.org/\n\npackages:\n  '@*/*':\n    # scoped packages\n    access: $all\n    publish: $authenticated\n    proxy: npmjs\n\n  '*':\n    # allow all users (including non-authenticated users) to read and\n    # publish all packages\n    #\n    # you can specify usernames/groupnames (depending on your auth plugin)\n    # and three keywords: \"$all\", \"$anonymous\", \"$authenticated\"\n    access: $all\n\n    # allow all known users to publish packages\n    # (anyone can register by default, remember?)\n    publish: $authenticated\n\n    # if package is not available locally, proxy requests to 'npmjs' registry\n    proxy: npmjs\n\n# log settings\nlogs:\n  - {type: stdout, format: pretty, level: http}\n  #- {type: file, path: sinopia.log, level: info}\n```\n\n## 추가 설정\n\n* 외부에서의 연결과 용량 제한을 늘리기 위해 설정 파일 하단에 `listen`과 `max_body_size`를 추가하여 사용할 수 있다.\n* 전체 옵션은 [여기](https://github.com/rlidwka/sinopia/blob/master/conf/full.yaml)에서 확인할 수 있다.\n\n```yaml linenumber\nlisten: 0.0.0.0:4873\nmax_body_size: 100mb\n```\n\n## Reference\n\n* [npm-scope](https://docs.npmjs.com/using-npm/scope.html)\n* [npm-about-private-packages](https://docs.npmjs.com/about-private-packages)\n* [sinopia](https://www.npmjs.com/package/sinopia)\n",
    "code": "var Component=(()=>{var h=Object.create;var l=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var N=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var k=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),g=(a,e)=>{for(var s in e)l(a,s,{get:e[s],enumerable:!0})},o=(a,e,s,i)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let c of m(e))!u.call(a,c)&&c!==s&&l(a,c,{get:()=>e[c],enumerable:!(i=p(e,c))||i.enumerable});return a};var f=(a,e,s)=>(s=a!=null?h(N(a)):{},o(e||!a||!a.__esModule?l(s,\"default\",{value:a,enumerable:!0}):s,a)),y=a=>o(l({},\"__esModule\",{value:!0}),a);var t=k((I,r)=>{r.exports=_jsx_runtime});var v={};g(v,{default:()=>w,frontmatter:()=>b});var n=f(t()),b={title:\"\\uBE44\\uACF5\\uAC1C NPM \\uC800\\uC7A5\\uC18C \\uAD6C\\uC131\\uD558\\uAE30\",date:\"2020-02-02\",tags:[\"NPM\"],draft:!1,summary:\"\\uC624\\uD508\\uC18C\\uC2A4 sinopia\\uB97C \\uC0AC\\uC6A9\\uD574\\uC11C Prvate NPM \\uC800\\uC7A5\\uC18C\\uB97C \\uAD6C\\uC131\\uD558\\uACE0 \\uC2A4\\uCF54\\uD504 \\uBB38\\uC81C\\uB97C \\uD574\\uACB0\\uD55C \\uACBD\\uD5D8\\uC744 \\uC815\\uB9AC\\uD558\\uC790.\"};function d(a){let e=Object.assign({div:\"div\",blockquote:\"blockquote\",p:\"p\",strong:\"strong\",code:\"code\",h2:\"h2\",a:\"a\",span:\"span\",pre:\"pre\",ul:\"ul\",li:\"li\",h3:\"h3\"},a.components),{Image:s}=e;return s||j(\"Image\",!0,\"9:1-9:68\"),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.div,{children:(0,n.jsx)(s,{alt:\"npm-sinopia.png\",src:\"/static/images/posts/2020/02/02/npm-sinopia.png\",width:\"1910\",height:\"673\"})}),(0,n.jsx)(e.blockquote,{children:(0,n.jsx)(e.p,{children:\"\\uC624\\uD508\\uC18C\\uC2A4 Sinopia\\uB97C \\uC0AC\\uC6A9\\uD574\\uC11C Prvate NPM \\uC800\\uC7A5\\uC18C\\uB97C \\uAD6C\\uC131\\uD558\\uACE0 \\uC2A4\\uCF54\\uD504 \\uBB38\\uC81C\\uB97C \\uD574\\uACB0\\uD55C \\uACBD\\uD5D8\\uC744 \\uC815\\uB9AC\\uD558\\uC790.\"})}),(0,n.jsxs)(e.p,{children:[\"\\uB514\\uC790\\uC778 \\uC2DC\\uC2A4\\uD15C\\uC744 \\uBAA9\\uD45C\\uB85C \\uD55C Vue \\uD504\\uB808\\uC784\\uC6CC\\uD06C \\uAE30\\uBC18\\uC758 UI \\uD15C\\uD50C\\uB9BF \",(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"Vuesign\"})}),\"(Vue + Design\\uC758 \\uD569\\uC131\\uC5B4)\\uC744 \\uB9CC\\uB4E4\\uC5C8\\uB2E4. \\uC774 \\uD15C\\uD50C\\uB9BF\\uC744 \\uC0AC\\uC6A9\\uD574\\uC11C \\uC5EC\\uB7EC \\uAC1C\\uC758 \\uC6F9 \\uD504\\uB85C\\uC81D\\uD2B8\\uAC00 \\uC9C4\\uD589\\uB420 \\uC608\\uC815\\uC774\\uACE0 \\uD15C\\uD50C\\uB9BF\\uC758 \\uB0B4\\uC6A9\\uC774 \\uBCC0\\uACBD\\uB418\\uBA74 \\uB2F9\\uC5F0\\uD788 \\uAC01 \\uC6F9 \\uC0AC\\uC774\\uD2B8\\uC5D0 \\uBCC0\\uACBD\\uC0AC\\uD56D\\uC774 \\uBC30\\uD3EC\\uAC00 \\uB418\\uC5B4\\uC57C \\uD55C\\uB2E4. npm\\uC758 \\uD328\\uD0A4\\uC9C0 \\uAD00\\uB9AC \\uC7A5\\uC810\\uC744 \\uADF8\\uB300\\uB85C \\uC0AC\\uC6A9\\uD558\\uACE0 \\uC2F6\\uC5B4\\uC11C \\uBCC4\\uB3C4\\uC758 \\uBE44\\uACF5\\uAC1C NPM \\uC800\\uC7A5\\uC18C\\uB97C \\uAD6C\\uCD95\\uD558\\uAE30\\uB85C \\uD588\\uB2E4. npm\\uC5D0\\uC11C \\uC81C\\uACF5\\uD558\\uB294 \\uC11C\\uBE44\\uC2A4\\uB294 \\uBE44\\uC6A9 \\uBB38\\uC81C\\uAC00 \\uC788\\uC5B4\\uC11C sinopia\\uB77C\\uB294 \\uC624\\uD508\\uC18C\\uC2A4\\uB97C \\uC0AC\\uC6A9\\uD574\\uC11C \\uAD6C\\uC131\\uD588\\uB2E4.\"]}),(0,n.jsxs)(e.h2,{id:\"\\uC124\\uCE58-\\uBC0F-\\uC0AC\\uC6A9\\uC790-\\uC0DD\\uC131\",children:[(0,n.jsx)(e.a,{href:\"#\\uC124\\uCE58-\\uBC0F-\\uC0AC\\uC6A9\\uC790-\\uC0DD\\uC131\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\uC124\\uCE58 \\uBC0F \\uC0AC\\uC6A9\\uC790 \\uC0DD\\uC131\"]}),(0,n.jsxs)(e.p,{children:[\"\\uC0C1\\uC138\\uD55C \\uB0B4\\uC6A9\\uC740 \",(0,n.jsx)(e.a,{href:\"https://github.com/rlidwka/sinopia\",children:\"README\"}),\"\\uB97C \\uD655\\uC778\\uD558\\uC790.\"]}),(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsxs)(e.code,{className:\"language-bash code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"# \\uAE00\\uB85C\\uBC8C\\uB85C \\uD328\\uD0A4\\uC9C0 \\uC124\\uCE58\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"$ \",(0,n.jsx)(e.span,{className:\"token function\",children:\"npm\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"install\"}),\" \",(0,n.jsx)(e.span,{className:\"token parameter variable\",children:\"-g\"}),` sinopia\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"# \\uC11C\\uBE44\\uC2A4 \\uC2E4\\uD589\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`$ sinopia\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"# \\uC0AC\\uC6A9\\uC790 \\uC0DD\\uC131  \"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"$ \",(0,n.jsx)(e.span,{className:\"token function\",children:\"npm\"}),\" adduser \",(0,n.jsx)(e.span,{className:\"token parameter variable\",children:\"--registry\"}),` http://localhost:4873/\n`]})]})}),(0,n.jsx)(e.blockquote,{children:(0,n.jsxs)(e.p,{children:[\"\\uBE0C\\uB77C\\uC6B0\\uC800\\uC5D0\\uC11C \",(0,n.jsx)(e.code,{children:\"http://localhost:4873/\"}),\" \\uD639\\uC740 \\uC678\\uBD80 IP:4873 \\uD3EC\\uD2B8\\uB85C \\uC811\\uC18D\\uD574\\uC11C \\uC704\\uC5D0\\uC11C \\uC0DD\\uC131\\uD55C \\uC0AC\\uC6A9\\uC790\\uB85C \\uB85C\\uADF8\\uC778\\uD574\\uC11C \\uC815\\uC0C1 \\uC124\\uCE58 \\uC5EC\\uBD80\\uB97C \\uD655\\uC778\\uD55C\\uB2E4.\"]})}),(0,n.jsxs)(e.h2,{id:\"\\uBC31\\uADF8\\uB77C\\uC6B4\\uB4DC\\uB85C-\\uC11C\\uBE44\\uC2A4-\\uC2DC\\uC791--\\uC885\\uB8CC\",children:[(0,n.jsx)(e.a,{href:\"#\\uBC31\\uADF8\\uB77C\\uC6B4\\uB4DC\\uB85C-\\uC11C\\uBE44\\uC2A4-\\uC2DC\\uC791--\\uC885\\uB8CC\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\uBC31\\uADF8\\uB77C\\uC6B4\\uB4DC\\uB85C \\uC11C\\uBE44\\uC2A4 \\uC2DC\\uC791 & \\uC885\\uB8CC\"]}),(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsxs)(e.code,{className:\"language-bash code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"# \\uB85C\\uADF8 \\uB0A8\\uAE30\\uC9C0 \\uC54A\\uACE0 \\uBC31\\uADF8\\uB77C\\uC6B4\\uB4DC\\uC5D0\\uC11C \\uC2E4\\uD589\\uD558\\uAE30\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"$ \",(0,n.jsx)(e.span,{className:\"token function\",children:\"nohup\"}),\" sinopia \",(0,n.jsxs)(e.span,{className:\"token operator\",children:[(0,n.jsx)(e.span,{className:\"token file-descriptor important\",children:\"1\"}),\">\"]}),\"/dev/null \",(0,n.jsxs)(e.span,{className:\"token operator\",children:[(0,n.jsx)(e.span,{className:\"token file-descriptor important\",children:\"2\"}),\">\"]}),(0,n.jsx)(e.span,{className:\"token file-descriptor important\",children:\"&1\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"&\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"# \\uC885\\uB8CC\\uD558\\uAE30\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"$ \",(0,n.jsx)(e.span,{className:\"token function\",children:\"pkill\"}),\" \",(0,n.jsx)(e.span,{className:\"token parameter variable\",children:\"-9\"}),` sinopia\n`]})]})}),(0,n.jsxs)(e.h2,{id:\"\\uC0AC\\uC6A9\\uBC29\\uBC95\",children:[(0,n.jsx)(e.a,{href:\"#\\uC0AC\\uC6A9\\uBC29\\uBC95\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\uC0AC\\uC6A9\\uBC29\\uBC95\"]}),(0,n.jsx)(e.ul,{children:(0,n.jsx)(e.li,{children:\"npm \\uD658\\uACBD\\uC124\\uC815\\uC758 registry\\uB97C \\uBCC0\\uACBD\\uD558\\uACE0 \\uCEE4\\uB9E8\\uB4DC \\uC0AC\\uC6A9\"})}),(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsxs)(e.code,{className:\"language-bash code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"# \\uAE30\\uC874 \\uC124\\uC815 \\uD655\\uC778 & \\uC800\\uC7A5\\uC18C \\uBCC0\\uACBD\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"$ \",(0,n.jsx)(e.span,{className:\"token function\",children:\"npm\"}),` config list\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"$ \",(0,n.jsx)(e.span,{className:\"token function\",children:\"npm\"}),\" \",(0,n.jsx)(e.span,{className:\"token builtin class-name\",children:\"set\"}),` registry http://localhost:4873\n`]})]})}),(0,n.jsx)(e.ul,{children:(0,n.jsx)(e.li,{children:\"\\uAE00\\uB85C\\uBC8C\\uB85C \\uBCC0\\uACBD\\uD558\\uC9C0 \\uC54A\\uACE0 \\uCEE4\\uB9E8\\uB4DC\\uC5D0 \\uC635\\uC158\\uC744 \\uCD94\\uAC00\\uD558\\uC5EC \\uC0AC\\uC6A9\"})}),(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsxs)(e.code,{className:\"language-bash code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"# \\uC635\\uC158\\uC73C\\uB85C \\uC0AC\\uC6A9\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"$ \",(0,n.jsx)(e.span,{className:\"token function\",children:\"npm\"}),\" i \",(0,n.jsx)(e.span,{className:\"token parameter variable\",children:\"--registry\"}),` http://localhost:4873\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"$ \",(0,n.jsx)(e.span,{className:\"token function\",children:\"npm\"}),\" publish \",(0,n.jsx)(e.span,{className:\"token parameter variable\",children:\"--registry\"}),` http://localhost:4873\n`]})]})}),(0,n.jsx)(e.blockquote,{children:(0,n.jsxs)(e.p,{children:[\"\\uAE43\\uD5C8\\uBE0C \\uB808\\uD3EC\\uC9C0\\uD1A0\\uB9AC\\uC758 README.md \\uBB38\\uC11C\\uC5D0 \\uC791\\uC131\\uB418\\uC5B4 \\uC788\\uB294 \\uC0AC\\uC6A9 \\uC0AC\\uB840\\uB97C \\uC77D\\uC5B4 \\uBCF4\\uBA74 \",(0,n.jsx)(e.code,{children:\"\\uD328\\uD0A4\\uC9C0\\uC758 \\uD504\\uB77C\\uC774\\uBE57 \\uD55C \\uC800\\uC7A5\\uC18C\"}),\" \\uC678\\uC5D0\\uB3C4 npmjs.org \\uB808\\uC9C0\\uC2A4\\uD2B8\\uB9AC\\uC758 \\uCE90\\uC2DC \\uC5ED\\uD560\\uB3C4 \\uD560 \\uC218 \\uC788\\uB2E4.\"]})}),(0,n.jsxs)(e.h2,{id:\"\\uAE30\\uBCF8-\\uD658\\uACBD-\\uC124\\uC815\",children:[(0,n.jsx)(e.a,{href:\"#\\uAE30\\uBCF8-\\uD658\\uACBD-\\uC124\\uC815\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\uAE30\\uBCF8 \\uD658\\uACBD \\uC124\\uC815\"]}),(0,n.jsxs)(e.ul,{children:[(0,n.jsx)(e.li,{children:\"\\uC124\\uC815 \\uD30C\\uC77C\\uC740 yaml \\uD615\\uC2DD\\uC73C\\uB85C \\uC791\\uC131\\uB41C\\uB2E4.\"}),(0,n.jsxs)(e.li,{children:[\"default \\uB0B4\\uC6A9\\uC740 \",(0,n.jsx)(e.a,{href:\"https://github.com/rlidwka/sinopia/blob/master/conf/default.yaml\",children:\"\\uC5EC\\uAE30\"}),\"\\uC5D0\\uC11C \\uD655\\uC778\\uD560 \\uC218 \\uC788\\uB2E4.\"]}),(0,n.jsxs)(e.li,{children:[\"\\uD648 \\uB514\\uB809\\uD1A0\\uB9AC \\uD558\\uC704\\uC758\",(0,n.jsx)(e.code,{children:\".config/sinopia/config.ymal\"}),\" \\uACBD\\uB85C\\uC5D0 \\uC704\\uCE58\\uD55C\\uB2E4.\"]})]}),(0,n.jsxs)(e.h2,{id:\"\\uC8FC\\uC694-\\uC774\\uC288-\\uBC0F-\\uD574\\uACB0\",children:[(0,n.jsx)(e.a,{href:\"#\\uC8FC\\uC694-\\uC774\\uC288-\\uBC0F-\\uD574\\uACB0\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\uC8FC\\uC694 \\uC774\\uC288 \\uBC0F \\uD574\\uACB0\"]}),(0,n.jsxs)(e.h3,{id:\"\\uC774\\uC288\",children:[(0,n.jsx)(e.a,{href:\"#\\uC774\\uC288\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\uC774\\uC288\"]}),(0,n.jsx)(e.p,{children:\"\\uCD5C\\uADFC \\uD504\\uB860\\uD2B8\\uC5D4\\uB4DC \\uD504\\uB808\\uC784\\uC6CC\\uD06C\\uC778 Vue.js, Angular, React\\uB97C \\uC0B4\\uD3B4\\uBCF4\\uBA74 \\uC2A4\\uCF54\\uD504\\uB97C \\uC758\\uBBF8\\uD558\\uB294 @ \\uAE30\\uD638\\uAC00 \\uD3EC\\uD568\\uB418\\uC5B4 \\uC788\\uB294 \\uAC83\\uC744 \\uBCFC \\uC218 \\uC788\\uB294\\uB370 \\uC774\\uB807\\uAC8C @\\uAC00 \\uD3EC\\uD568\\uB41C \\uD328\\uD0A4\\uC9C0\\uB97C \\uB2E4\\uC6B4\\uB85C\\uB4DC \\uD560 \\uB54C\\uB294 \\uD328\\uD0A4\\uC9C0\\uB97C \\uCC3E\\uC744 \\uC218 \\uC5C6\\uB2E4\\uB294 404 \\uC624\\uB958\\uAC00 \\uBC1C\\uC0DD\\uD55C\\uB2E4.\"}),(0,n.jsxs)(e.h3,{id:\"\\uC6D0\\uC778\",children:[(0,n.jsx)(e.a,{href:\"#\\uC6D0\\uC778\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\uC6D0\\uC778\"]}),(0,n.jsxs)(e.p,{children:[\"\\uAE30\\uBCF8 \\uC124\\uC815 packages\\uC758 \",(0,n.jsx)(e.code,{children:\"@*/*\"}),\"\\uC5D0\\uB294 \\uD504\\uB85D\\uC2DC\\uAC00 \\uC124\\uC815\\uB418\\uC5B4 \\uC788\\uC9C0 \\uC54A\\uACE0 \\uB85C\\uCEEC(\\uD504\\uB77C\\uC774\\uBE57 \\uC800\\uC7A5\\uC18C)\\uC5D0 \\uD574\\uB2F9 \\uD328\\uD0A4\\uC9C0\\uAC00 \\uC874\\uC7AC\\uD558\\uC9C0 \\uC54A\\uC744 \\uACBD\\uC6B0\\uC5D0\\uB294 \\uB354 \\uCC3E\\uC9C0 \\uC54A\\uB294 \\uAC83\\uC774\\uB2E4.\"]}),(0,n.jsx)(e.p,{children:\"\\uC774 \\uC624\\uD508\\uC18C\\uC2A4\\uC758 \\uAC1C\\uBC1C \\uB2F9\\uC2DC\\uC778 \\uC57D 5\\uB144 \\uC804\\uC5D0\\uB294 \\uD328\\uD0A4\\uC9C0\\uC758 \\uC774\\uB984\\uC5D0 @\\uAC00 \\uC9C0\\uAE08\\uCC98\\uB7FC \\uBCF4\\uD3B8\\uD654\\uB418\\uC5B4 \\uC0AC\\uC6A9\\uB418\\uC9C0 \\uC54A\\uC558\\uACE0 \\uD504\\uB77C\\uC774\\uBE57 \\uD55C \\uBE44\\uACF5\\uAC1C \\uD328\\uD0A4\\uC9C0\\uB780 \\uC758\\uBBF8\\uB85C \\uB9CE\\uC774 \\uC4F0\\uC774\\uB2E4 \\uBCF4\\uB2C8 \\uC0DD\\uAE34 \\uBB38\\uC81C\\uAC00 \\uC544\\uB2D0\\uAE4C \\uC2F6\\uB2E4.\"}),(0,n.jsxs)(e.h3,{id:\"\\uD574\\uACB0\",children:[(0,n.jsx)(e.a,{href:\"#\\uD574\\uACB0\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\uD574\\uACB0\"]}),(0,n.jsxs)(e.p,{children:[\"\\uAE30\\uBCF8 \\uC124\\uC815 \\uD30C\\uC77C\\uC5D0\\uC11C \",(0,n.jsx)(e.code,{children:\"@*/*\"}),\" \\uD558\\uC704 \\uB808\\uBCA8\\uC5D0 \",(0,n.jsx)(e.code,{children:\"proxy: npmjs\"}),\" \\uC744 \\uCD94\\uAC00\\uD574 \\uC8FC\\uBA74 @ \\uAE30\\uD638\\uAC00 \\uD3EC\\uD568\\uB41C \\uD328\\uD0A4\\uC9C0\\uB97C \\uB85C\\uCEEC(\\uD504\\uB77C\\uC774\\uBE57 \\uC800\\uC7A5\\uC18C)\\uC5D0\\uC11C \\uCC3E\\uC9C0 \\uBABB\\uD558\\uB354\\uB77C\\uB3C4 \",(0,n.jsx)(e.code,{children:\"npmjs\"}),\"\\uC800\\uC7A5\\uC18C\\uAE4C\\uC9C0 \\uD0D0\\uC0C9\\uD574\\uC11C \\uC815\\uC0C1\\uC801\\uC73C\\uB85C \\uD328\\uD0A4\\uC9C0\\uB97C \\uB2E4\\uC6B4\\uB85C\\uB4DC\\uD560 \\uC218 \\uC788\\uAC8C \\uB41C\\uB2E4.\"]}),(0,n.jsx)(e.pre,{className:\"language-yml\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-yml\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"#\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"# This is the default config file. It allows all users to do anything,\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"# so don't use it on production systems.\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"#\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"# Look here for more config file examples:\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"# https://github.com/rlidwka/sinopia/tree/master/conf\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"#\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"# path to a directory with all packages\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"storage\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` ./storage\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"auth\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"htpasswd\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"file\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` ./htpasswd\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token comment\",children:'# Maximum amount of users allowed to register, defaults to \"+inf\".'}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"# You can set this to -1 to disable registration.\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"#max_users: 1000\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"# a list of other known repositories we can talk to\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"uplinks\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"npmjs\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"url\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" https\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`//registry.npmjs.org/\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"packages\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"'@*/*'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"# scoped packages\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"access\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` $all\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"publish\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` $authenticated\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"proxy\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` npmjs\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"'*'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"# allow all users (including non-authenticated users) to read and\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"# publish all packages\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"#\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"# you can specify usernames/groupnames (depending on your auth plugin)\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token comment\",children:'# and three keywords: \"$all\", \"$anonymous\", \"$authenticated\"'}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"access\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` $all\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"# allow all known users to publish packages\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"# (anyone can register by default, remember?)\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"publish\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` $authenticated\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"# if package is not available locally, proxy requests to 'npmjs' registry\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"proxy\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` npmjs\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"# log settings\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"logs\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"type\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" stdout\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"format\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" pretty\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"level\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" http\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"#- {type: file, path: sinopia.log, level: info}\"}),`\n`]})]})}),(0,n.jsxs)(e.h2,{id:\"\\uCD94\\uAC00-\\uC124\\uC815\",children:[(0,n.jsx)(e.a,{href:\"#\\uCD94\\uAC00-\\uC124\\uC815\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\uCD94\\uAC00 \\uC124\\uC815\"]}),(0,n.jsxs)(e.ul,{children:[(0,n.jsxs)(e.li,{children:[\"\\uC678\\uBD80\\uC5D0\\uC11C\\uC758 \\uC5F0\\uACB0\\uACFC \\uC6A9\\uB7C9 \\uC81C\\uD55C\\uC744 \\uB298\\uB9AC\\uAE30 \\uC704\\uD574 \\uC124\\uC815 \\uD30C\\uC77C \\uD558\\uB2E8\\uC5D0 \",(0,n.jsx)(e.code,{children:\"listen\"}),\"\\uACFC \",(0,n.jsx)(e.code,{children:\"max_body_size\"}),\"\\uB97C \\uCD94\\uAC00\\uD558\\uC5EC \\uC0AC\\uC6A9\\uD560 \\uC218 \\uC788\\uB2E4.\"]}),(0,n.jsxs)(e.li,{children:[\"\\uC804\\uCCB4 \\uC635\\uC158\\uC740 \",(0,n.jsx)(e.a,{href:\"https://github.com/rlidwka/sinopia/blob/master/conf/full.yaml\",children:\"\\uC5EC\\uAE30\"}),\"\\uC5D0\\uC11C \\uD655\\uC778\\uD560 \\uC218 \\uC788\\uB2E4.\"]})]}),(0,n.jsx)(e.pre,{className:\"language-yaml\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-yaml\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"listen\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" 0.0.0.0\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"4873\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"max_body_size\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` 100mb\n`]})]})}),(0,n.jsxs)(e.h2,{id:\"reference\",children:[(0,n.jsx)(e.a,{href:\"#reference\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Reference\"]}),(0,n.jsxs)(e.ul,{children:[(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"https://docs.npmjs.com/using-npm/scope.html\",children:\"npm-scope\"})}),(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"https://docs.npmjs.com/about-private-packages\",children:\"npm-about-private-packages\"})}),(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"https://www.npmjs.com/package/sinopia\",children:\"sinopia\"})})]})]})}function x(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,Object.assign({},a,{children:(0,n.jsx)(d,a)})):d(a)}var w=x;function j(a,e,s){throw new Error(\"Expected \"+(e?\"component\":\"object\")+\" `\"+a+\"` to be defined: you likely forgot to import, pass, or provide it.\"+(s?\"\\nIt\\u2019s referenced in your code at `\"+s+\"` in `/home/swlee/dev/repository/github/seungwoo321.vercel.app/_mdx_bundler_entry_point-17f90a21-959d-4f9d-9120-85f04d65d6e2.mdx`\":\"\"))}return y(v);})();\n;return Component;"
  },
  "_id": "blog/2020/02/02/how-to-private-npm.mdx",
  "_raw": {
    "sourceFilePath": "blog/2020/02/02/how-to-private-npm.mdx",
    "sourceFileName": "how-to-private-npm.mdx",
    "sourceFileDir": "blog/2020/02/02",
    "contentType": "mdx",
    "flattenedPath": "blog/2020/02/02/how-to-private-npm"
  },
  "type": "Blog",
  "readingTime": {
    "text": "6 min read",
    "minutes": 5.535,
    "time": 332100,
    "words": 1107
  },
  "slug": "2020/02/02/how-to-private-npm",
  "path": "blog/2020/02/02/how-to-private-npm",
  "filePath": "blog/2020/02/02/how-to-private-npm.mdx",
  "toc": [
    {
      "value": "설치 및 사용자 생성",
      "url": "#설치-및-사용자-생성",
      "depth": 2
    },
    {
      "value": "백그라운드로 서비스 시작 & 종료",
      "url": "#백그라운드로-서비스-시작--종료",
      "depth": 2
    },
    {
      "value": "사용방법",
      "url": "#사용방법",
      "depth": 2
    },
    {
      "value": "기본 환경 설정",
      "url": "#기본-환경-설정",
      "depth": 2
    },
    {
      "value": "주요 이슈 및 해결",
      "url": "#주요-이슈-및-해결",
      "depth": 2
    },
    {
      "value": "이슈",
      "url": "#이슈",
      "depth": 3
    },
    {
      "value": "원인",
      "url": "#원인",
      "depth": 3
    },
    {
      "value": "해결",
      "url": "#해결",
      "depth": 3
    },
    {
      "value": "추가 설정",
      "url": "#추가-설정",
      "depth": 2
    },
    {
      "value": "Reference",
      "url": "#reference",
      "depth": 2
    }
  ]
}